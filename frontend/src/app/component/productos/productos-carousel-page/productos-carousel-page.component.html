<div class="container">
  <div class="row justify-content-center">

    <ng-container *ngFor="let item of products; let i =index">
      <div class="col-sm-6 col-md-4 col-lg-3 mt-2">
        <div class="card m-auto">
          <!-- arupaciones -->
          <img *ngIf="item.urlImage" class="card-img-top " [src]="item.urlImage" alt="{{item.nombre}}">
          <img *ngIf="!item.urlImage" width="130" height="230" class="card-img-top" src="assets/no_image_aviable.png"
            alt="{{item.nombre}}" />

          <div class="card-body" [ngStyle]=" colorTres ? {background: colorTres } : ''">
            <div class="text-center ">
              <small class="text-center txt-azul txt-marca">{{item.marca}}</small>
              <small *ngIf="!item.marca" class="text-center txt-azul txt-marca">SIN ESPECIFICAR</small>
              <h6 *ngIf="item.Agrupacion" class="card-title text-center txt-azul font-bold">
                {{item.Agrupacion}}
              </h6>
              <h6 *ngIf="!item.Agrupacion" class="card-title text-center txt-azul font-bold">
                {{item.nombre}}
              </h6>
            </div>
            <div *ngIf="item.valoracion" class="valoracion text-center">
               
                <fa-icon class="star" matSuffix [icon]="['fa', 'star']" [ngClass]="{'disable-star':item.valoracion < 1}"></fa-icon>
                <fa-icon class="star" matSuffix [icon]="['fa', 'star']" [ngClass]="{'disable-star':item.valoracion < 2}"></fa-icon>
                <fa-icon class="star" matSuffix [icon]="['fa', 'star']" [ngClass]="{'disable-star':item.valoracion < 3}"></fa-icon>
                <fa-icon class="star" matSuffix [icon]="['fa', 'star']" [ngClass]="{'disable-star':item.valoracion < 4}"></fa-icon>
                <fa-icon class="star" matSuffix [icon]="['fa', 'star']" [ngClass]="{'disable-star':item.valoracion < 5}"></fa-icon>
              
            </div>
            <div class="text-center semi-body">
              <!--  si existe agrupacion -->
              <!-- <div *ngIf="item.Agrupacion && item.listAgrupacion">
                <div class="agrupacion"  *ngIf="item.listAgrupacion.length">
                    <div class=" row justify-content-center " >
                        <div *ngFor="let ite of item.listAgrupacion; let j = index">
                          <div class="col-3 pb-1 ">
                              <div class="  rectangle font-bold bg-azul text-white m-auto" 
                              style="font-size: .8rem;padding: .2rem;" 
                              (click)="selectAgrupacion(i,j)"
                                [ngClass]="{'disable-circle':ite.codeProdSys != item.codeProdSys}"
                              >
                                {{ite.kiloProdcuto}}
                              </div>
                          </div>
                        </div>
        
                      </div>
                </div>
             </div> -->
              <div *ngIf="item.Agrupacion && item.listAgrupacion">
                <div class="agrupacion justify-content-center" *ngIf="item.listAgrupacion.length">

                  <div *ngFor="let ite of item.listAgrupacion; let j = index">

                    
                   
                  <div class="pr-2">
                      <div class="  rectangle font-bold bg-azul text-white m-auto" 
                      (click)="selectAgrupacion(i,j)" [ngClass]="{'disable-circle':ite.codeProdSys != item.codeProdSys}">
                      {{ite.kiloProdcuto}}
                    </div>
                    
                  </div>
              
                  

                  </div>


                </div>
              </div>

              <!--  si no existe agrupacion -->
              <div *ngIf="!item.Agrupacion ">

                <div class="agrupacion">
                  <div class="circle font-bold bg-azul text-white m-auto" style="font-size: .6rem;padding: .2rem;">
                    {{item.kiloProdcuto}}
                  </div>
                </div>


              </div>
              <div *ngIf="item.Agrupacion && !item.listAgrupacion" class="agrupacion">
                <div class="circle font-bold bg-azul text-white m-auto" style="font-size: .6rem;padding: .2rem;">
                  {{item.kiloProdcuto}}
                </div>
              </div>



              <h5 class="text-center txt-naranja font-bold mt-2">POR: {{item.defaultPrice | currency: 'ARS': '$'}}</h5>


              <div class="row justify-content-center mt-2 mb-2">
                <div class="col-8 d-flex justify-content-center">
                  <button mat-icon-button (click)="incrase(item, false)">
                    <fa-icon class="txt-azul" [icon]="['fa','minus']" size="1x"></fa-icon>
                  </button>
                  <div class="circle font-bold bg-white text-black-50" style="font-size: 1.4rem;">
                    {{item.cantidad}}
                  </div>
                  <button mat-icon-button (click)="incrase(item, true)">
                    <fa-icon class="txt-azul" [icon]="['fa','plus']" size="1x"></fa-icon>
                  </button>
                </div>
              </div>
              <button mat-raised-button class="btn-block bg-naranja text-white" (click)="addItem(item)">COMPRAR</button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>